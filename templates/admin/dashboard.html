{% extends 'admin/base.html' %}

{% block title %}Дашборд{% endblock %}
{% block page_title %}Дашборд{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon primary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
            </svg>
        </div>
        <div class="stat-content">
            <h3>{{ stats.trips }}</h3>
            <p>Курсів / Подорожей</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon info">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
            </svg>
        </div>
        <div class="stat-content">
            <h3>{{ stats.posts }}</h3>
            <p>Статей у блозі</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon success">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
            </svg>
        </div>
        <div class="stat-content">
            <h3>{{ stats.gallery }}</h3>
            <p>Фото в галереї</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon warning">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
            </svg>
        </div>
        <div class="stat-content">
            <h3>{{ stats.contacts }}</h3>
            <p>Нових заявок</p>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2>Останні заявки</h2>
        <a href="{{ url_for('admin_contacts') }}" class="btn btn-sm btn-secondary">Всі заявки</a>
    </div>
    <div class="card-body">
        {% if contacts %}
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Ім'я</th>
                        <th>Email</th>
                        <th>Телефон</th>
                        <th>Дата</th>
                        <th>Статус</th>
                    </tr>
                </thead>
                <tbody>
                    {% for contact in contacts %}
                    <tr>
                        <td>{{ contact.name or '—' }}</td>
                        <td>{{ contact.email or '—' }}</td>
                        <td>{{ contact.phone or '—' }}</td>
                        <td>{{ contact.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                        <td>
                            {% if contact.is_read %}
                            <span class="badge badge-success">Прочитано</span>
                            {% else %}
                            <span class="badge badge-warning">Нова</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
            </svg>
            <h3>Заявок поки немає</h3>
            <p>Нові заявки з сайту з'являться тут</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

